<mat-card>
  <mat-card-title>
    Audit #{{id}}
    <mat-icon id="questionanswericon" class="position-right" (click)="drawer.toggle()">
      question_answer
    </mat-icon>
  </mat-card-title>
  <mat-drawer-container class="comment-container">
    <mat-drawer #drawer class="comment" mode="side" position="end">
      <div class="comment">
        <div class="comment-header" fxLayoutAlign="center">
          <h2>Comment Board</h2>
        </div>
        <div id="comment-history" class="comment-history">
          <div *ngFor="let comment of comments">
            <div class="comment-text">
              {{comment}}
            </div>
          </div>
        </div>

        <div class="comment-message">
          <form>
            <mat-form-field class="comment-input">
              <mat-label>Enter Comment</mat-label>
              <input matInput type="text" [(ngModel)]="comment_value" [ngModelOptions]="{standalone: true}" rows="1">
              <button mat-button *ngIf="comment_value" matSuffix mat-icon-button aria-label="Comment"
                      (click)="this.comment()">
                <mat-icon id="sendicon">send</mat-icon>
              </button>
            </mat-form-field>
          </form>
        </div>

      </div>
    </mat-drawer>
    <mat-drawer-content>

      <mat-divider></mat-divider>
      <!--  AUDIT META DATA -->
      <div>

        <table aria-describedby="audit" mat-table *ngIf="dataSource" [dataSource]="metaDataSource" matSort>
          <ng-container *ngFor="let column of displayedMetaColumns" [matColumnDef]="column">
            <th scope="col" mat-header-cell *matHeaderCellDef mat-sort-header>{{ column.replaceAll('_', ' ') }}</th>
            <td mat-cell *matCellDef="let object">
              {{ object[column]}}
            </td>
          </ng-container>
          <tr mat-header-row *matHeaderRowDef="displayedMetaColumns"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedMetaColumns;"></tr>
        </table>

        <mat-card class="auditinfo">
          <mat-card-content>

            <table aria-describedby="audit" mat-table *ngIf="dataSource" [dataSource]="dataSource" matSort>
              <ng-container *ngFor="let column of displayedColumns" [matColumnDef]="column">
                <th scope="col" mat-header-cell *matHeaderCellDef mat-sort-header>{{ column.replaceAll('_', ' ') }}</th>
                <td mat-cell *matCellDef="let object">
                  {{ object[column]}}
                </td>
              </ng-container>
              <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
              <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
            </table>

            <mat-paginator
              [length]="length"
              [pageSize]="pageSize"
              [pageSizeOptions]="[25,50,100]"
              [pageIndex]="pageIndex"
              (page)="paginatorAction($event)">
            </mat-paginator>
          </mat-card-content>
        </mat-card>

      </div>


    </mat-drawer-content>
  </mat-drawer-container>

</mat-card>
